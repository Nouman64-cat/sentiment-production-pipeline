"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[443],{671(e,t,n){n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>g,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var a=n(8168),r=(n(6540),n(5680));const i={sidebar_position:3},l="Project Architecture",o={unversionedId:"architecture",id:"architecture",title:"Project Architecture",description:"Understanding the folder structure and design decisions behind the Sentiment Analysis Pipeline.",source:"@site/docs/architecture.md",sourceDirName:".",slug:"/architecture",permalink:"/sentiment-production-pipeline/docs/architecture",draft:!1,editUrl:"https://github.com/Nouman64-cat/sentiment-production-pipeline/tree/main/docs/docs/architecture.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Installation",permalink:"/sentiment-production-pipeline/docs/installation"},next:{title:"Dataset Building Process",permalink:"/sentiment-production-pipeline/docs/dataset"}},s={},p=[{value:"Directory Structure",id:"directory-structure",level:2},{value:"Architecture Decisions",id:"architecture-decisions",level:2},{value:"Modular Design",id:"modular-design",level:3},{value:"Why This Structure?",id:"why-this-structure",level:3},{value:"Data Flow",id:"data-flow",level:2},{value:"Key Components",id:"key-components",level:2},{value:"Preprocessing Module (<code>src/preprocessing/</code>)",id:"preprocessing-module-srcpreprocessing",level:3},{value:"Models Module (<code>src/models/</code>)",id:"models-module-srcmodels",level:3},{value:"API Module (<code>src/api/</code>)",id:"api-module-srcapi",level:3},{value:"Configuration Management",id:"configuration-management",level:2},{value:"Artifact Storage",id:"artifact-storage",level:2},{value:"Scaling Considerations",id:"scaling-considerations",level:2}],d={toc:p};function g({components:e,...t}){return(0,r.yg)("wrapper",(0,a.A)({},d,t,{components:e,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"project-architecture"},"Project Architecture"),(0,r.yg)("p",null,"Understanding the folder structure and design decisions behind the Sentiment Analysis Pipeline."),(0,r.yg)("h2",{id:"directory-structure"},"Directory Structure"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"sentiment-production-pipeline/\n\u251c\u2500\u2500 dataset/                    # Training data\n\u2502   \u2514\u2500\u2500 data.csv               # Curated sentiment dataset\n\u2502\n\u251c\u2500\u2500 docs/                       # Docusaurus documentation (you are here)\n\u2502\n\u251c\u2500\u2500 models/                     # Trained model artifacts\n\u2502   \u251c\u2500\u2500 ml_model.joblib        # Serialized scikit-learn pipeline\n\u2502   \u2514\u2500\u2500 dl_model.pth           # PyTorch model weights\n\u2502\n\u251c\u2500\u2500 mlruns/                     # MLflow experiment tracking data\n\u2502\n\u251c\u2500\u2500 notebooks/                  # Jupyter notebooks for analysis\n\u2502   \u2514\u2500\u2500 analysis.ipynb         # Model comparison notebook\n\u2502\n\u251c\u2500\u2500 src/                        # Main source code\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 api/                   # FastAPI application\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 main.py           # API routes and startup\n\u2502   \u2502   \u2514\u2500\u2500 database.py       # SQLite logging utilities\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 models/                # Model training scripts\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u251c\u2500\u2500 train_ml.py       # Classical ML training\n\u2502   \u2502   \u2514\u2500\u2500 train_dl.py       # Deep Learning training\n\u2502   \u2502\n\u2502   \u251c\u2500\u2500 preprocessing/         # Text preprocessing\n\u2502   \u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2502   \u2514\u2500\u2500 clean.py          # Text cleaning functions\n\u2502   \u2502\n\u2502   \u2514\u2500\u2500 scripts/               # Utility scripts\n\u2502       \u2514\u2500\u2500 download_dataset.py\n\u2502\n\u251c\u2500\u2500 tests/                      # Test suite\n\u2502   \u2514\u2500\u2500 test_preprocessing.py  # Preprocessing unit tests\n\u2502\n\u251c\u2500\u2500 Dockerfile                  # Container definition\n\u251c\u2500\u2500 pyproject.toml             # Project metadata\n\u251c\u2500\u2500 requirements.txt           # Python dependencies\n\u2514\u2500\u2500 README.md                  # Project overview\n")),(0,r.yg)("h2",{id:"architecture-decisions"},"Architecture Decisions"),(0,r.yg)("h3",{id:"modular-design"},"Modular Design"),(0,r.yg)("p",null,"The project follows a modular architecture where each component has a single responsibility:"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Module"),(0,r.yg)("th",{parentName:"tr",align:null},"Responsibility"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"src/preprocessing/")),(0,r.yg)("td",{parentName:"tr",align:null},"Text cleaning and normalization")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"src/models/")),(0,r.yg)("td",{parentName:"tr",align:null},"Model training and evaluation")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"src/api/")),(0,r.yg)("td",{parentName:"tr",align:null},"REST API and request handling")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"src/scripts/")),(0,r.yg)("td",{parentName:"tr",align:null},"Data preparation utilities")))),(0,r.yg)("h3",{id:"why-this-structure"},"Why This Structure?"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Separation of Concerns"),": Each module handles one aspect of the pipeline"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Easy Testing"),": Isolated modules can be unit tested independently"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Reusability"),": Preprocessing can be imported anywhere without circular dependencies"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Scalability"),": New models or endpoints can be added without modifying existing code")),(0,r.yg)("h2",{id:"data-flow"},"Data Flow"),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre"},"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Raw Text    \u2502\u2500\u2500\u2500\u25b6\u2502  Preprocessing  \u2502\u2500\u2500\u2500\u25b6\u2502  Clean Text   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502  (clean.py)     \u2502    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518            \u2502\n                                                   \u25bc\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u2502   Model A (ML)  \u2502\u25c0\u2500\u2500\u2500\u2502  API Request  \u2502\n                    \u2502   TF-IDF + LR   \u2502    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518            \u2502\n                           \u2502                       \u25bc\n                           \u25bc              \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502  Model B (DL) \u2502\n                    \u2502   Prediction    \u2502   \u2502  DistilBERT   \u2502\n                    \u2502   Response      \u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518            \u2502\n                           \u25b2                       \u2502\n                           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n")),(0,r.yg)("h2",{id:"key-components"},"Key Components"),(0,r.yg)("h3",{id:"preprocessing-module-srcpreprocessing"},"Preprocessing Module (",(0,r.yg)("inlineCode",{parentName:"h3"},"src/preprocessing/"),")"),(0,r.yg)("p",null,"The preprocessing module provides a single, consistent text cleaning function used by:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Training scripts (data preparation)"),(0,r.yg)("li",{parentName:"ul"},"API endpoints (inference-time cleaning)"),(0,r.yg)("li",{parentName:"ul"},"Analysis notebooks (evaluation)")),(0,r.yg)("p",null,"This ensures identical preprocessing during training and inference, preventing data drift."),(0,r.yg)("h3",{id:"models-module-srcmodels"},"Models Module (",(0,r.yg)("inlineCode",{parentName:"h3"},"src/models/"),")"),(0,r.yg)("p",null,"Contains training scripts with:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"MLflow integration")," for experiment tracking"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Hyperparameter tuning")," via GridSearchCV"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Model serialization")," for production deployment")),(0,r.yg)("h3",{id:"api-module-srcapi"},"API Module (",(0,r.yg)("inlineCode",{parentName:"h3"},"src/api/"),")"),(0,r.yg)("p",null,"FastAPI application with:"),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Lifespan management")," for model loading"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Prediction logging")," to SQLite"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"Health checks")," for monitoring"),(0,r.yg)("li",{parentName:"ul"},(0,r.yg)("strong",{parentName:"li"},"MLflow tracing")," for observability")),(0,r.yg)("h2",{id:"configuration-management"},"Configuration Management"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"File"),(0,r.yg)("th",{parentName:"tr",align:null},"Purpose"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},".env")),(0,r.yg)("td",{parentName:"tr",align:null},"Environment variables (API keys, paths)")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"pyproject.toml")),(0,r.yg)("td",{parentName:"tr",align:null},"Project metadata and tool configuration")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"requirements.txt")),(0,r.yg)("td",{parentName:"tr",align:null},"Pinned Python dependencies")))),(0,r.yg)("h2",{id:"artifact-storage"},"Artifact Storage"),(0,r.yg)("table",null,(0,r.yg)("thead",{parentName:"table"},(0,r.yg)("tr",{parentName:"thead"},(0,r.yg)("th",{parentName:"tr",align:null},"Artifact"),(0,r.yg)("th",{parentName:"tr",align:null},"Location"),(0,r.yg)("th",{parentName:"tr",align:null},"Format"))),(0,r.yg)("tbody",{parentName:"table"},(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"ML Model"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"models/ml_model.joblib")),(0,r.yg)("td",{parentName:"tr",align:null},"Joblib serialized sklearn pipeline")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"DL Model"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"models/dl_model.pth")),(0,r.yg)("td",{parentName:"tr",align:null},"PyTorch state dict")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"MLflow Data"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"mlruns/")),(0,r.yg)("td",{parentName:"tr",align:null},"MLflow artifact store")),(0,r.yg)("tr",{parentName:"tbody"},(0,r.yg)("td",{parentName:"tr",align:null},"Logs"),(0,r.yg)("td",{parentName:"tr",align:null},(0,r.yg)("inlineCode",{parentName:"td"},"logs.db")),(0,r.yg)("td",{parentName:"tr",align:null},"SQLite database")))),(0,r.yg)("h2",{id:"scaling-considerations"},"Scaling Considerations"),(0,r.yg)("p",null,"The current architecture supports:"),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Horizontal Scaling"),": API is stateless (models loaded at startup)"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Model Versioning"),": MLflow tracks all experiments"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"Containerization"),": Dockerfile included for consistent deployments"),(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("strong",{parentName:"li"},"A/B Testing"),": Separate endpoints for each model enable gradual rollouts")))}g.isMDXComponent=!0},5680(e,t,n){n.d(t,{xA:()=>d,yg:()=>u});var a=n(6540);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},d=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},g={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef(function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),c=p(n),u=r,y=c["".concat(s,".").concat(u)]||c[u]||g[u]||i;return n?a.createElement(y,l(l({ref:t},d),{},{components:n})):a.createElement(y,l({ref:t},d))});function u(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,l=new Array(i);l[0]=c;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:r,l[1]=o;for(var p=2;p<i;p++)l[p]=n[p];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"}}]);